# Golang面试题

## 1、有哪些数据类型？

1、与其他语言相比，使用 Go 有什么好处?

1. 与其他作为学术实验开始的语言不同，Go 代码的设计是务实的。每个功能和语法决策都旨在让程序员的生活 更轻松。
2. Golang 针对并发进行了优化，并且在规模上运行良好。
3. 由于单一的标准代码格式，Golang 通常被认为比其他语言更具可读性。
4. 自动垃圾收集明显比 Java 或 Python 更有效，因为它与程序同时执行。

2、Golang 使用什么数据类型?

Golang 使用以下类型:

- Method 
- Boolean 
- Numeric 
- String 
- Array 
- Slice 
- Struct
- Pointer 
- Function 
- Interface 
- Map 
- Channel

3、关于整型切片的初始化，下面正确的是?

- A. s := make([]int)
- B. s := make([]int, 0)
- C. s := make([]int, 5, 10) 
- D. s := []int{1, 2, 3, 4, 5} 

答案：BCD

## 2、channel有哪些特性？

1、关于channel的特性，下面说法正确的是?

- A. 给一个 nil channel 发送数据，造成永远阻塞
- B. 从一个 nil channel 接收数据，造成永远阻塞
- C. 给一个已经关闭的 channel 发送数据，引起 panic
- D. 从一个已经关闭的 channel 接收数据，如果缓冲区中为空，则返回一个零值 

> 答案 ABCD


2、下列代码有什么问题?
 
```go
const i = 100

var j = 123

func main() {
    fmt.Println(&j, j)
    fmt.Println(&i, i)
}

```

> 答案: Go语言中，常量无法寻址, 是不能进行取指针操作的


3、下列代码输出什么?
  
```go
func Test62(t *testing.T) {
    x := []string{"a", "b", "c"}

    for v := range x {
        fmt.Print(v)
    }
}

```

> 答案 012

range 一个返回值时，这个值是下标，两个值时，第一个是下标，第二个是值，当 x 为 map时，第一个是
key，第二个是value


## 3、请描述下select机制

1、关于无缓冲和有冲突的channel，下面说法正确的是?

- A. 无缓冲的channel是默认的缓冲为1的channel;
- B. 无缓冲的channel和有缓冲的channel都是同步的;
- C. 无缓冲的channel和有缓冲的channel都是非同步的;
- D. 无缓冲的channel是同步的，而有缓冲的channel是非同步的; 

> 答案 D

2、下列代码输出什么?

```go
func Foo(x interface{}) {
    if x == nil {
        fmt.Println("empty interface")
        return
    }

    fmt.Println("non-empty interface")
}


func Test64(t *testing.T) {
    var x *int = nil
    Foo(x) 
}
```

> 答案: non-empty interface

接口除了有静态类型，还有动态类型和动态值， 当且仅当动态值和动态类型都为 nil 时，接口类型值才为 nil。 这里的 x 的动态类型是 *int，所以 x 不为 nil

3、关于select机制，下面说法正确的是?

- A. select机制用来处理异步IO问题;
- B. select机制最大的一条限制就是每个case语句里必须是一个IO操作; 
- C. golang在语言级别支持select关键字;
- D. select关键字的用法与switch语句非常类似，后面要带判断条件; 

> 答案 ABC

## 4、字符串拼接

1、Go 程序中的包是什么?

包(pkg)是 Go 工作区中包含 Go 源文件或其他包的目录。源文件中的每个函数、变量和类型都存储在链接包中。每
个 Go 源文件都属于一个包，该包在文件顶部使用以下命令声明:

```go
package <packagename>
```

可以使用以下方法导入和导出包以重用导出的函数或类型:

```go
import <packagename>
```

Golang 的标准包是 `fmt`，其中包含格式化和打印功能，如 `Println()`.


2、关于字符串拼接,下列正确的是?

- A. str := 'abc' + '123'
- B. str := "abc" + "123"
- C. str := '123' + "abc"
- D. fmt.Sprintf("abc%d", 123) 

> 答案: B D 

双引号用来表示字符串 string，其实质是一个 byte 类型的数组，单引号表示 rune 类型。

3、Go 支持什么形式的类型转换?

将整数转换为浮点数。 Go 支持显式类型转换以满足其严格的类型要求。

```go
 
i := 55 //int
j := 67.8 //float64

sum := i + int(j) //j is converted to int
```

1、Log包线程安全吗? 

Golang的标准库提供了log的机制，但是该模块的功能较为简单(看似简单，其实他有他的设计思路)。在输出的
位置做了线程安全的保护。

2、下列哪一行会panic?

```go
func Test76(t *testing.T) {
    var x interface{}
    var y interface{} = []int{3, 5}

    _ = x == x
    _ = x == y
    _ = y == y
}
```

> 答案 `_ = y == y` 会发生panic, 因为两个比较值的动态类型为同一个不可比较类型


3、下列哪行代码会panic?

```go
func Test77(t *testing.T) {
    x := make([]int, 2, 10)
    _ = x[6:10]
    _ = x[6:]
    _ = x[2:] 
}
```

> 答案: `_ = x[6:]` 这一行会发生panic

截取符号 `[i:j]`，如果 j 省略，默认是原切片或者数组的⻓度，x 的⻓度是 2，小于起始下标 6 ，所以 panic

## 5、协程，线程，进程的区别

1、关于switch语句，下面说法正确的有?

- A. 条件表达式必须为常量或者整数;
- B. 单个case中，可以出现多个结果选项;
- C. 需要用break来明确退出一个case;
- D. 只有在case中明确添加fallthrough关键字，才会继续执行紧跟的下一个case;

> 答案: BD

2、关于 bool 变量 b 的赋值，下面错误的用法是?

- A. b = true
- B. b = 1
- C. b = bool(1) 
- D. b = (1 == 2)

> 答案: BC

3、协程，线程，进程的区别。

（1）进程

进程是具有一定独立功能的程序关于某个数据集合上的一次运行活动,进程是系统进行资源分配和调度的一个独立单 位。每个进程都有自己的独立内存空间，不同进程通过进程间通信来通信。由于进程比较重量，占据独立的内存， 所以上下文进程间的切换开销(栈、寄存器、虚拟内存、文件句柄等)比较大，但相对比较稳定安全。

（2）线程

线程是进程的一个实体,是CPU调度和分派的基本单位,它是比进程更小的能独立运行的基本单位.线程自己基本上不 拥有系统资源,只拥有一点在运行中必不可少的资源(如程序计数器,一组寄存器和栈),但是它可与同属一个进程的其 他的线程共享进程所拥有的全部资源。线程间通信主要通过共享内存，上下文切换很快，资源开销较少，但相比进 程不够稳定容易丢失数据。

（3）协程

协程是一种用户态的轻量级线程，协程的调度完全由用户控制。协程拥有自己的寄存器上下文和栈。协程调度切换
时，将寄存器上下文和栈保存到其他地方，在切回来的时候，恢复先前保存的寄存器上下文和栈，直接操作栈则基
本没有内核切换的开销，可以不加锁的访问全局变量，所以上下文的切换非常快。

## 6、什么是channel?

1、关于协程，下列说法正确的有?

- A. 协程和线程都可以实现程序的并发执行; 
- B. 线程比协程更轻量级;
- C. 协程不存在死锁问题;
- D. 通过 channel 来进行协程间的通信; 

> 答案: AD

2、什么是channel，为什么它可以做到线程安全? 

Channel是Go中的一个核心类型，可以把它看成一个管道，通过它并发核心单元就可以发送或者接收数据进行通讯
(communication),Channel也可以理解是一个先进先出的队列，通过管道进行通信。

Golang的Channel,发送一个数据到Channel 和 从Channel接收一个数据 都是 原子性的。而且Go的设计思想就是: 不要通过共享内存来通信，而是通过通信来共享内存，前者就是传统的加锁，后者就是Channel。也就是说，设计 Channel的主要目的就是在多任务间传递数据的，这当然是安全的。

3、读写锁或者互斥锁读的时候能写吗?

Go中读写锁包括读锁和写锁，多个读线程可以同时访问共享数据;写线程必须等待所有读线程都释放锁以后，才 能取得锁;同样的，读线程必须等待写线程释放锁后，才能取得锁，也就是说读写锁要确保的是如下互斥关系，可 以同时读，但是读-写，写-写都是互斥的。

文章来源：2022Go后端开发大厂面试题.pdf
